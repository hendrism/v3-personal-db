{% extends "base.html" %}

{% block title %}
{% if edit_mode %}Edit Goal{% else %}Add Goal{% endif %} - {{ student.display_name }}
{% endblock %}

{% block content %}
<div class="container">
    <div class="page-header">
        {% if edit_mode %}
            <h1>‚úèÔ∏è Edit Goal</h1>
            <p class="text-muted">Modify goal for {{ student.display_name }}</p>
        {% else %}
            <h1>‚ûï Add New Goal</h1>
            <p class="text-muted">Create goal for {{ student.display_name }}</p>
        {% endif %}
    </div>

    <!-- ‚úÖ ADD COLOR CODING -->
    <div class="card {% if edit_mode %}edit-form{% else %}add-form{% endif %}">
        <form method="POST">
            <div class="form-group">
                <label for="description">Goal Description *</label>
                <!-- ‚úÖ PRE-FILL WITH EXISTING TEXT -->
                <textarea id="description" name="description" rows="3" required 
                         placeholder="Describe the overall goal (e.g., 'Improve articulation of /r/ sound in all positions')">{% if edit_mode and goal %}{{ goal.description }}{% endif %}</textarea>
            </div>
            
            <div class="form-group">
                <label for="target_accuracy">Target Accuracy (%)</label>
                <!-- ‚úÖ PRE-FILL WITH EXISTING VALUE -->
                <input type="number" id="target_accuracy" name="target_accuracy" 
                       value="{% if edit_mode and goal %}{{ goal.target_accuracy }}{% else %}80{% endif %}" 
                       min="0" max="100">
                <small class="form-text">Overall target accuracy for this goal</small>
            </div>
            
            <div class="button-group">
                <button type="submit" class="btn {% if edit_mode %}btn-warning{% else %}btn-primary{% endif %}">
                    {% if edit_mode %}üíæ Update Goal{% else %}‚ûï Add Goal{% endif %}
                </button>
                <a href="{{ url_for('students.student_detail', student_id=student.id) }}" class="btn btn-secondary">Cancel</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}